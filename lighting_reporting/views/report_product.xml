<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright NuoBiT Solutions, S.L. (<https://www.nuobit.com>)
     Eric Antones <eantones@nuobit.com>
     License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl) -->
<odoo>
    <template id="external_layout_lighting">
        <!-- Multicompany -->
        <t t-if="not o and doc">
            <t t-set="o" t-value="doc"/>
        </t>

        <t t-if="o and 'company_id' in o">
            <t t-set="company" t-value="o.company_id.sudo()"/>
        </t>
        <t t-if="not o or not 'company_id' in o">
            <t t-set="company" t-value="res_company"/>
        </t>

        <div class="header">

            <div class="row">
                <div class="col-xs-12">
                    <div class="text-right">
                        <t t-foreach="doc.catalog_ids" t-as="c">
                            <img style="max-width:20%;"
                                 t-attf-src="data:image/*;base64,{{c.image}}"/>
                        </t>
                    </div>
                </div>
            </div>


            <!--div class="row">
                <div class="col-xs-3 mb4">
                    <img t-if="company.logo" t-att-src="'data:image/png;base64,%s' % to_text(company.logo)"
                         style="max-height: 45px;"/>
                </div>
                <div class="col-xs-9 text-right" style="margin-top:22px;" t-field="company.report_header" name="moto"/>
            </div>
            <div t-if="company.logo or company.report_header" class="row zero_min_height">
                <div class="col-xs-12">
                    <div style="border-bottom: 1px solid black;"/>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-6" name="company_address">
                    <span t-field="company.partner_id"
                          t-field-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": true}'
                          style="border-bottom: 1px solid black; display:inline-block;"/>
                </div>
            </div-->
        </div>

        <div class="article o_report_layout_standard">
            <t t-raw="0"/>
        </div>

        <div class="footer">
            <div class="text-center">
                <img t-if="company.logo" t-att-src="'data:image/png;base64,%s' % to_text(company.logo)"
                     style="max-height: 45px;"/>

                <ul class="list-inline mb4">
                    <li t-if="company.street or company.street2">
                        <span t-esc="' '.join(filter(lambda x: x, [company.street,company.street2]))"/>
                    </li>
                    <li>
                        <span t-esc="' '.join(filter(lambda x: x, [company.zip,company.city,company.state_id.name, company.country_id.name]))"/>
                    </li>
                    <li t-if="company.phone">
                        Tel.
                        <span t-field="company.phone"/>
                    </li>
                    <li>
                        <span t-esc="' / '.join(filter(lambda x: x, [company.email, company.website]))"/>
                    </li>
                </ul>


                <div class="text-muted">
                    Page:
                    <span class="page"/>
                    /
                    <span class="topage"/>
                </div>
            </div>
        </div>
    </template>


    <template id="report_product_document">
        <t t-call="lighting_reporting.external_layout_lighting">
            <!--t t-set="doc" t-value="doc.with_context({'lang':doc.partner_id.lang})"/-->
            <t t-set="brand_color" t-value="'#%s' % doc.catalog_ids[0].html_color"/>
            <div class="page">
                <div class="oe_structure"/>
                <div class="row">
                    <div class="col-xs-4">
                        <div class="row">
                            <div class="text-center">
                                <t t-set="images"
                                   t-value="doc.attachment_ids.filtered(lambda x: x.type_id.code == 'F' and x.attachment_id.index_content == 'image').sorted(lambda x: (x.sequence, x.id))"/>
                                <img style="max-width:90%;"
                                     t-attf-src="data:image/*;base64,{{images and images[0].datas}}"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="text-center">
                                <t t-set="images"
                                   t-value="doc.attachment_ids.filtered(lambda x: x.type_id.code == 'E' and x.attachment_id.index_content == 'image').sorted(lambda x: (x.sequence, x.id))"/>
                                <img style="max-width:90%;"
                                     t-attf-src="data:image/*;base64,{{images and images[0].datas}}"/>
                            </div>
                        </div>
                    </div>

                    <div class="col-xs-8">
                        <div class="row">
                            <h1 t-field="doc.reference"/>
                            <h4 t-field="doc.description"/>

                            <div t-if="doc.category_id">
                                <strong>Category</strong>
                                <span t-field="doc.category_id"/>
                            </div>

                            <div t-if="doc.family_ids">
                                <strong>Family</strong>
                                <span t-esc="', '.join([x.name for x in doc.family_ids])"/>
                            </div>
                        </div>

                        <div class="row">
                            <div t-attf-style="border-top: 3px solid {{ brand_color }};">
                                <table class="table table-condensed">
                                    <tr t-if="doc.location_ids">
                                        <td>
                                            <strong>Location</strong>
                                        </td>
                                        <td>
                                            <span t-esc="', '.join([x.name for x in doc.location_ids])"/>
                                        </td>
                                    </tr>
                                    <tr t-if="doc.finish_id">
                                        <td>
                                            <strong>Finish</strong>
                                        </td>
                                        <td>
                                            <span t-field="doc.finish_id"/>
                                        </td>
                                    </tr>
                                    <tr t-if="doc.application_ids">
                                        <td>
                                            <strong>Applications</strong>
                                        </td>
                                        <td>
                                            <span t-esc="', '.join([x.name for x in doc.application_ids])"/>
                                        </td>
                                    </tr>
                                    <tr t-if="doc.dimension_ids">
                                        <td>
                                            <strong>Dimensions</strong>
                                        </td>
                                        <td>
                                            <span t-esc="doc.dimension_ids.get_display()"/>
                                        </td>
                                    </tr>
                                    <tr t-if="doc.installation_ids">
                                        <td>
                                            <strong>Installation</strong>
                                        </td>
                                        <td>
                                            <span t-esc="', '.join([x.name for x in doc.installation_ids])"/>
                                        </td>
                                    </tr>
                                    <tr t-if="doc.body_material_ids">
                                        <td>
                                            <strong>Body material</strong>
                                        </td>
                                        <td>
                                            <span t-esc="', '.join([x.name for x in doc.body_material_ids])"/>
                                        </td>
                                    </tr>
                                    <tr t-if="doc.diffusor_material_ids">
                                        <td>
                                            <strong>Diffuser material</strong>
                                        </td>
                                        <td>
                                            <span t-esc="', '.join([x.name for x in doc.diffusor_material_ids])"/>
                                        </td>
                                    </tr>
                                    <tr t-if="doc.frame_material_ids">
                                        <td>
                                            <strong>Frame material</strong>
                                        </td>
                                        <td>
                                            <span t-esc="', '.join([x.name for x in doc.frame_material_ids])"/>
                                        </td>
                                    </tr>
                                    <tr t-if="doc.reflector_material_ids">
                                        <td>
                                            <strong>Reflector material</strong>
                                        </td>
                                        <td>
                                            <span t-esc="', '.join([x.name for x in doc.reflector_material_ids])"/>
                                        </td>
                                    </tr>
                                    <tr t-if="doc.blade_material_ids">
                                        <td>
                                            <strong>Blade material</strong>
                                        </td>
                                        <td>
                                            <span t-esc="', '.join([x.name for x in doc.blade_material_ids])"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <h3>Technical specifications</h3>
                    <div t-attf-style="border-top: 3px solid {{ brand_color }};">
                        <div class="col-xs-6">
                            <table class="table table-condensed">
                                <tr t-if="doc.sealing_id">
                                    <td>
                                        <strong>Sealing</strong>
                                    </td>
                                    <td>
                                        <span t-field="doc.sealing_id"/>
                                    </td>
                                </tr>
                                <tr t-if="doc.sealing2_id">
                                    <td>
                                        <strong>IP2</strong>
                                    </td>
                                    <td>
                                        <span t-field="doc.sealing2_id"/>
                                    </td>
                                </tr>
                                <tr t-if="doc.ik">
                                    <td>
                                        <strong>IK</strong>
                                    </td>
                                    <td>
                                        <span t-field="doc.ik"/>
                                    </td>
                                </tr>
                                <tr t-if="doc.ik">
                                    <td>
                                        <strong>IK</strong>
                                    </td>
                                    <td>
                                        <span t-field="doc.ik"/>
                                    </td>
                                </tr>

                                <tr t-if="doc.protection_class_id">
                                    <td>
                                        <strong>Protection class</strong>
                                    </td>
                                    <td>
                                        <span t-field="doc.protection_class_id"/>
                                    </td>
                                </tr>

                                <tr t-if="doc.frequency_id">
                                    <td>
                                        <strong>Frequency</strong>
                                    </td>
                                    <td>
                                        <span t-field="doc.frequency_id"/>
                                    </td>
                                </tr>

                                <tr t-if="doc.input_voltage_id">
                                    <td>
                                        <strong>Input voltage</strong>
                                    </td>
                                    <td>
                                        <span t-field="doc.input_voltage_id"/>
                                    </td>
                                </tr>

                                <tr t-if="doc.input_voltage_id">
                                    <td>
                                        <strong>Input voltage</strong>
                                    </td>
                                    <td>
                                        <span t-field="doc.input_voltage_id"/>
                                    </td>
                                </tr>

                            </table>
                        </div>
                        <div class="col-xs-6">
                            <table class="table table-condensed">
                                <tr t-if="doc.source_ids">
                                    <td>
                                        <strong>Sources</strong>
                                    </td>
                                    <td>
                                        <t t-foreach="doc.source_ids" t-as="s">
                                            <span t-field="s.line_display"/>
                                        </t>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="row" style="page-break-inside: avoid;">
                    <div class="col-xs-6">
                        <h3>Photometric data</h3>
                        <div t-attf-style="border-top: 3px solid {{ brand_color }};">
                            <t t-set="images"
                               t-value="doc.attachment_ids.filtered(lambda x: x.type_id.code == 'Q' and x.attachment_id.index_content == 'image').sorted(lambda x: (x.sequence, x.id))"/>
                            <img style="max-width:40%"
                                 t-attf-src="data:image/*;base64,{{images and images[0].datas}}"/>

                            <t t-set="images"
                               t-value="doc.attachment_ids.filtered(lambda x: x.type_id.code == 'C' and x.attachment_id.index_content == 'image').sorted(lambda x: (x.sequence, x.id))"/>
                            <img style="max-width:40%"
                                 t-attf-src="data:image/*;base64,{{images and images[0].datas}}"/>
                        </div>
                    </div>
                    <div class="col-xs-5">
                        <h3>Energy label</h3>
                        <div t-attf-style="border-top: 3px solid {{ brand_color }};">
                            <t t-set="images"
                               t-value="doc.attachment_ids.filtered(lambda x: x.type_id.code == 'EF' and x.attachment_id.index_content == 'image').sorted(lambda x: (x.sequence, x.id))"/>
                            <img style="max-width:30%"
                                 t-attf-src="data:image/*;base64,{{images and images[0].datas}}"/>
                        </div>
                    </div>
                </div>
                <div class="oe_structure"/>
            </div>
        </t>
    </template>

    <template id="report_product">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <!--t t-call="lighting_portal_product_report.report_portalproduct" t-lang="doc.partner_id.lang"/-->
                <t t-call="lighting_reporting.report_product_document"/>
            </t>
        </t>
    </template>
</odoo>